Requests files are modules which contain method (called "actions"),
where each "action" can be any of:

  _install: used by the installer script

  _session_ready: called when the connection with the XMPP server is established
  _response: called when a response is received from another node
  _dispatch: called (if present) when no specific callback is available

or any "action" defined by the specific application.

These methods MUST either die() or return a valid AE::cv which will then
be called to obtain the result of the operation.

More specifically, the method (and the AE::cv, except for "die") may:

  # Cancel the response without further error processing:
  die 'cancel'
  return undef    # method: No condvar means no response (aka Cancel)
  $rcv->send('cancel')

  # Send a "successful" response with or without a result:
  $rcv->send
  $rcv->send('completed')
  $rcv->send({ name => value })  # Successful, with result (must be a hashref)

  # Send a "failure" response with an error message:
  die [$error_template,$param1,$param2,..]  # Cannot be used inside callbacks
  $rcv->send([$error_template,$param1,$param2,..])

(The last case follows the templates in Locale::Maketext, i.e. should use
[_1], [_2], .. for parameters. This allows for I18N of results.)

Here, $rcv is an AE::cv that is created inside the "action" sub if any
further processing is needed.
